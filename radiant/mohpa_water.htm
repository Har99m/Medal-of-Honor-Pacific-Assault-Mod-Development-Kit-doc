<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 10">
<meta name=Originator content="Microsoft Word 10">
<link rel=File-List href="mohpa_water_files/filelist.xml">
<link rel=Edit-Time-Data href="mohpa_water_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>MOHPA WATER</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>lsempe</o:Author>
  <o:LastAuthor>bbilodeau</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>153</o:TotalTime>
  <o:Created>2004-12-07T19:34:00Z</o:Created>
  <o:LastSaved>2004-12-07T19:34:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>899</o:Words>
  <o:Characters>5130</o:Characters>
  <o:Company>EA</o:Company>
  <o:Lines>42</o:Lines>
  <o:Paragraphs>12</o:Paragraphs>
  <o:CharactersWithSpaces>6017</o:CharactersWithSpaces>
  <o:Version>10.3501</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:GrammarState>Clean</w:GrammarState>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:553679495 -2147483648 8 0 66047 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="5122"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoNormal align=center style='text-align:center'><b style='mso-bidi-font-weight:
normal'><span style='font-size:14.0pt;font-family:Tahoma'>MOHPA WATER<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>This document explains how
to setup the different kinds of water available in MOHPA.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>Water Types<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Tahoma'>Currently there are four
types of water supported in MOHPA, they are:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>Interactive: </span></b><span style='font-family:
Tahoma'>Interactive water is water that reacts to bullets and explosions, you
can see ripples go through the surface of the water when it gets shot. Because
of the overhead in calculating the water simulation, this water type is better
suited to small bodies of water, small ponds, puddles or pools.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>Ocean: </span></b><span style='font-family:Tahoma'>Ocean
water is the default water type used in MOHPA, it can be modified to look like
many types of water by editing the material, <span class=GramE>it</span> can be
used for larger bodies of water such as lakes, oceans and swamps. This water
can have waves, the parameters for waves (direction, amplitude) can be tweaked
in the material, as well as the colors and transparency.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>Modeled Water: </span></b><span style='font-family:
Tahoma'>This is water that is exported from a 3D package (Max or Maya) into a
.GR2 file. This is mainly used for rivers which require special texture mapping
to work with animated textures. The way the water looks will depend on the
material applied to it.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>Infinite water: </span></b><span style='font-family:
Tahoma'>This is water that extends out to the horizon, it’s very useful for
levels such as those in which you’re in a plane and have substantial
visibility. With this water type, no matter where you are in the level, there
will always be water underneath the player that extends to the horizon.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>Creating Infinite Water<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Tahoma'>To set infinite water you
must set the following key/value pair in<b style='mso-bidi-font-weight:normal'>
WORLDSPAWN</b>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>Key: horizon_water <o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>Value: 1<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>There are a few properties
that you can change when working with infinite water, these are all worldspawn
key/value pairs:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>horizon_water_material</span></b><span
style='font-family:Tahoma'> – this is a string that identifies the material the
water should use. Default is “horizon_water”<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>horizon_water_height</span></b><span
style='font-family:Tahoma'> – this is the height at which the water will be
placed. Default is 256.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>horizon_water_tiling</span></b><span
style='font-family:Tahoma'> – this is the texture tiling factor of the water.
Default is 10.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>horizon_water_tessellation </span></b><span
style='font-family:Tahoma'>– this allows you to specify a tessellation factor,
this represents the number of vertices along each axis, the default is 32, this
means that the horizon water mesh will consist of 32 x 32 vertices.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>Creating Interactive Water<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Tahoma'>Start by right clicking on
the 2D window, go to the “Classes” menu and click on “Water”. This will create
a water brush that you can then resize to fit the area where water is
necessary.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:6in;
 height:479.25pt'>
 <v:imagedata src="mohpa_water_files/image001.jpg" o:title="1st_step"/>
</v:shape><![endif]--><![if !vml]><img width=576 height=639
src="mohpa_water_files/image002.jpg" v:shapes="_x0000_i1025"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>For physics to work
correctly in water (objects sinking or floating), you need to make sure that
the brush encompasses not only the area of the water, but the depth as well, as
shown in the next figure.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><!--[if gte vml 1]><v:shape
 id="_x0000_i1026" type="#_x0000_t75" style='width:6in;height:6in'>
 <v:imagedata src="mohpa_water_files/image003.jpg" o:title="2nd_step"/>
</v:shape><![endif]--><![if !vml]><img width=576 height=576
src="mohpa_water_files/image003.jpg" v:shapes="_x0000_i1026"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>Select the water brush and
press “N” to bring up the entity window. The description window contains the
following parameters that you can modify.<o:p></o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Tahoma'>&quot;num_nodes&quot; -
Integer representing the number of vertices, defaults to 16000.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>num_nodes can be useful to
increase or decrease the polycount of a water object (excluding for water that
has been modeled using a 3<sup>rd</sup> party tool).<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>&quot;targetname&quot; -
Name of the water brush, can be used to turn water on/off in script.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>This allows you to manually
hide and show water objects from script, this is the syntax:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>$world show_water
&lt;targetname&gt;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>$world hide_water
&lt;targetname&gt;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>This can be useful when you
go into a ship that’s being intersected by the water, or if you are in an area
that the water is not visible, yet due to the size of it, or for some other
reason is not being culled, you can manually turn it off for a performance
gain.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>&quot;materialname&quot; -
Name of the material to set to the water.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>The materialname must match
a .xmat file located in the “materials” folder in one of the main/pak*.rez
files shipped with the game (do not include the .xmat extension). <o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>&quot;collision_material_name&quot;
- Name of the collision material to apply to the water<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>This only needs to be set
in case the collision material is anything other than water, however it is
unlikely.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>&quot;current_strength&quot;
- Floating point number specifying a current.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>This should be a small
value, some tweaking may be needed to find the right current strength, 0 means
no current, <span class=GramE>5</span> is a very strong current.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>”current_direction&quot; -
Vector specifying direction of the current.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>This is a 2 dimensional
vector that specifies the direction of the current (as if you’re looking top
down at the water), alternatively, you can specify <o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>“current_angle” – Angle
from 0 – 360 which represents the direction of the current.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>Which is just an angle from
0 – 360, imagine you’re looking top down at the water and 0 angle points to the
right.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>&quot;drawmodel&quot; - If
a model is specified, the water type is overriden and water geometry is not
created<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>This is used only when the
water being used requires an external model, like rivers. <o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>NOTE ABOUT MODELED WATER:</span></b><span
style='font-family:Tahoma'> When you place a water object modeled externally,
you will notice that aside from being able to place the water, you can also
resize the brush associated with the water object. The size of this brush
determines the physical characteristic of the water, this means that whenever
the player or NPCs go within the bounds of the brush, they will be affected by
the water. Special care must be taken so that the brush does not poke out of
the terrain where there is no water, this may cause AI to think there’s water
there and behave as such, which is undesirable.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'>Getting physics to work with water</span></b><span
style='font-family:Tahoma'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>This is how you enable
water to have a current and allow objects/bodies to float on it.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'>You must begin by setting a
texture onto the water brush, you can find a water texture in Textures/common.
Once applied, make sure the brush is still selected, and to avoid overwriting
surface information, it is advised that you MIDDLE MOUSE click on a face of
your water brush to grab the surface properties.<span
style='mso-spacerun:yes'>  </span>Once you’ve done this, press the “S” key.
This will bring up the following dialog, check the box labeled “water” and then
press “apply”. If you forget to do this, you may experience odd behavior, such
as NPC’s or the player walking on water.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><!--[if gte vml 1]><v:shape
 id="_x0000_i1027" type="#_x0000_t75" style='width:6in;height:248.25pt'>
 <v:imagedata src="mohpa_water_files/image004.jpg" o:title="3rd_step_contents"/>
</v:shape><![endif]--><![if !vml]><img width=576 height=331
src="mohpa_water_files/image005.jpg" v:shapes="_x0000_i1027"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Tahoma'><o:p>&nbsp;</o:p></span></b></p>

</div>

</body>

</html>
